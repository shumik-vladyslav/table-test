<div class="bg">
  <div class="gradient"></div>
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <h1 rtl class="main-heading">{{ 'humanPosHistory.title' | translate }}</h1>
      </div>
    </div>
    <div class="row align-items-end">

      <div class="offset-md-2 col-md-8 entry">
        <mat-accordion>
          <mat-expansion-panel expanded class="of-v" (closed)="panelOpenState = false" (opened)="panelOpenState = true">
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{ 'humanPosHistory.filtrPanel.title' | translate }}
              </mat-panel-title>
              <!-- <mat-panel-description>
                    Currently I am {{panelOpenState ? 'open' : 'closed'}}
                  </mat-panel-description> -->
            </mat-expansion-panel-header>
            <div class="row">
              <mat-form-field class="col">
                <mat-select placeholder="{{ 'humanPosHistory.filtrPanel.objectName.title' | translate }}">
                  <mat-option *ngFor="let food of foods" [value]="food.value">
                    {{food.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="col">
                <mat-select placeholder="{{ 'humanPosHistory.filtrPanel.locationCategory.title' | translate }}">
                  <mat-option *ngFor="let food of foods" [value]="food.value">
                    {{food.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="row">
              <mat-form-field class="col">
                <mat-select placeholder="{{ 'humanPosHistory.filtrPanel.devision/department.title' | translate }}">
                  <mat-option *ngFor="let food of foods" [value]="food.value">
                    {{food.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="col">
                <mat-select placeholder="{{ 'humanPosHistory.filtrPanel.objectType.title' | translate }}">
                  <mat-option *ngFor="let food of foods" [value]="food.value">
                    {{food.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="row">
              <mat-form-field class="col">
                <mat-select placeholder="{{ 'humanPosHistory.filtrPanel.zoneSubtype.title' | translate }}">
                  <mat-option *ngFor="let food of foods" [value]="food.value">
                    {{food.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="col">
                <mat-select placeholder="{{ 'humanPosHistory.filtrPanel.nameMining.title' | translate }}">
                  <mat-option *ngFor="let food of foods" [value]="food.value">
                    {{food.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="row">
              <mat-form-field class="col">
                <mat-select placeholder="{{ 'humanPosHistory.filtrPanel.nameLived.title' | translate }}">
                  <mat-option *ngFor="let food of foods" [value]="food.value">
                    {{food.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="col">
                <mat-select placeholder="{{ 'humanPosHistory.filtrPanel.additionalZoneType.title' | translate }}">
                  <mat-option *ngFor="let food of foods" [value]="food.value">
                    {{food.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="row">
              <div class="col">
                <mat-form-field class="full-width">
                  <input (focus)="showDateFrom = true" [(ngModel)]="newDateFrom" matInput placeholder="{{ 'humanPosHistory.filtrPanel.startDate.title' | translate }}">
                </mat-form-field>
                <angular2-date-picker class="custome-date-time-picker dark-theme" (onDateSelect)="onDateFromSelect($event)"
                  [ngClass]="{'show-datepicker': showDateFrom}" [(ngModel)]="date" [settings]="settings"></angular2-date-picker>
              </div>
              <div class="col">
                <mat-form-field class="full-width">
                  <input (focus)="showDateTo = true" [(ngModel)]="newDateto" matInput placeholder="{{ 'humanPosHistory.filtrPanel.endDate.title' | translate }}">
                </mat-form-field>
                <angular2-date-picker class="custome-date-time-picker dark-theme" (onDateSelect)="onDateToSelect($event)"
                  [ngClass]="{'show-datepicker': showDateTo}" [(ngModel)]="date" [settings]="settings"></angular2-date-picker>
              </div>
            </div>
            <div class="row">
              <mat-form-field class="col">
                <mat-select placeholder="{{ 'humanPosHistory.filtrPanel.period.title' | translate }}">
                  <mat-option *ngFor="let food of foods" [value]="food.value">
                    {{food.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="row">
              <mat-form-field class="col">
                <textarea matInput placeholder="{{ 'humanPosHistory.filtrPanel.totalRecords.title' | translate }}"></textarea>
              </mat-form-field>
            </div>
            <div class="row">
              <mat-form-field class="col">
                <mat-select placeholder="{{ 'humanPosHistory.filtrPanel.recordsPage.title' | translate }}">
                  <mat-option *ngFor="let food of foods" [value]="food.value">
                    {{food.viewValue}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="row justify-content-end">
              <button mat-raised-button color="primary">{{ 'humanPosHistory.filtrPanel.save.title' | translate }}</button>
            </div>
          </mat-expansion-panel>
        </mat-accordion>
      </div>

      <div class="col-md-12 col-lg-12 mat-elevation-z8 table-wrap p-0">
        <div class="justify-content-end row-table-action">
        <button *ngIf="showCteateRow !== null" mat-button (click)="createRow('cancel')">{{ 'humanPosHistory.tableAction.cancel' | translate }}</button>
          <button mat-raised-button color="primary" (click)="createRow('create')">{{
            'humanPosHistory.tableAction.create' | translate }}</button>
        </div>
        <div class="table-wrap">

          <table *ngIf="reloadTable === false" mat-table [dataSource]="dataSource">

            <ng-container *ngFor="let item of displayedColumns" matColumnDef="{{item}}">
              <th mat-header-cell *matHeaderCellDef>
                <span *ngIf="item !== 'edit' && item !== 'delete'" class="header-table-item" (click)="sortFilds(item)">
                  {{item}}
                  <span class="sort-arrow-wrap">
                    <i class="material-icons" [ngClass]="{'up': sortDirection === 'ASC' && sortField === item, 'active': (sortField === item && showSortArrow === true), 'hide': !showSortArrow || sortDirection === null}">
                      arrow_downward
                    </i>
                  </span>
                </span>
                <span *ngIf="item === 'edit' || item === 'delete'" class="header-table-item edit-delete-lable">
                  {{item}}
                </span>
              </th>
              <td mat-cell *matCellDef="let element; let i = index">
                <span *ngIf="item !== 'edit' && item !== 'delete' && showCteateRow === i" class="cell-table-item">
                  <mat-form-field *ngIf="item !== 'date'" class="example-full-width">
                    <input matInput [(ngModel)]="editRowObj[item + i]" [value]="element[item]">
                  </mat-form-field>
                  <span *ngIf="item === 'date'" class="pos-r">
                    <mat-form-field class="full-width">
                      <input (focus)="showDateTable = true" [(ngModel)]="editRowObj[item + i]" matInput>
                    </mat-form-field>
                    <angular2-date-picker class="custome-date-time-picker dark-theme picker-table" (onDateSelect)="onDateTableSelect($event, i)"
                      [ngClass]="{'show-datepicker': showDateTable}" [(ngModel)]="date" [settings]="settings"></angular2-date-picker>
                  </span>
                </span>
                <span *ngIf="item !== 'edit' && item !== 'delete' && showCteateRow !== i" class="cell-table-item">
                  <span *ngIf="!editButtonName[i]">{{element[item]}}</span>
                  <span *ngIf="editButtonName[i]">
                    <mat-form-field *ngIf="item !== 'date'" class="example-full-width">
                      <input matInput [(ngModel)]="editRowObj[item + i]" [value]="element[item]">
                    </mat-form-field>
                    <span *ngIf="item === 'date'" class="pos-r">
                      <mat-form-field class="full-width">
                        <input (focus)="showDateTable = true" [(ngModel)]="editRowObj[item + i]" matInput>
                      </mat-form-field>
                      <angular2-date-picker class="custome-date-time-picker dark-theme picker-table" (onDateSelect)="onDateTableSelect($event, i)"
                        [ngClass]="{'show-datepicker': showDateTable}" [(ngModel)]="date" [settings]="settings"></angular2-date-picker>
                    </span>
                  </span>
                </span>
                <span *ngIf="item === 'edit' && showCteateRow === i" class="cell-table-item">
                  <button (click)="saveNew(i, element)" mat-button>
                    <i class="material-icons">
                      save
                    </i>
                  </button>
                </span>
                <span *ngIf="item === 'delete' && showCteateRow === i">
                  <button mat-button (click)="createRow('cancel')">
                    <i class="material-icons">
                      delete
                    </i>
                  </button>
                </span>
                <span *ngIf="item === 'edit' && showCteateRow !== i" class="cell-table-item">
                  <button *ngIf="!editButtonName[i]" mat-button (click)="edit(i, item, element, true)">
                    <i class="material-icons">
                      edit
                    </i>
                  </button>
                  <button *ngIf="editButtonName[i]" (click)="edit(i, item, element, false)" mat-button>
                    <i class="material-icons">
                      save
                    </i>
                  </button>
                </span>
                <span *ngIf="item === 'delete' && showCteateRow !== i">
                  <button mat-button (click)="delete(element)">
                    <i class="material-icons">
                      delete
                    </i>
                  </button>
                </span>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

          </table>
        </div>

        <mat-paginator [pageIndex]="pageIndex" [length]="length" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions"
          (page)="pageEvent = getPaginatorData($event)"></mat-paginator>

      </div>
    </div>
  </div>
</div>